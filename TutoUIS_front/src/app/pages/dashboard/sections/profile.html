<div class="section-content">
  <!-- Header -->
  <div class="profile-header">
    <div class="header-content">
      <div class="profile-avatar">
        <i class="bi bi-person-circle"></i>
      </div>
      <div class="header-info">
        @if (isLoading) {
          <div class="loading-skeleton" style="width: 250px; height: 28px; margin-bottom: 8px;"></div>
          <div class="loading-skeleton" style="width: 180px; height: 20px;"></div>
        } @else {
          <h1 class="profile-name">{{ profileData?.nombre }} {{ profileData?.apellido }}</h1>
          <p class="profile-role">
            <i class="bi bi-shield-check"></i>
            {{ getRoleName(profileData?.id_rol) }}
          </p>
        }
      </div>
    </div>
    <div class="header-actions">
      <span class="status-badge" [class.active]="profileData?.activo" [class.inactive]="!profileData?.activo">
        <i class="bi" [class.bi-check-circle-fill]="profileData?.activo" [class.bi-x-circle-fill]="!profileData?.activo"></i>
        {{ profileData?.activo ? 'Activo' : 'Inactivo' }}
      </span>
      <button class="btn-edit" (click)="toggleEditMode()" [class.active]="isEditing">
        @if (!isEditing) {
          <i class="bi bi-pencil-square"></i>
          <span>Editar Perfil</span>
        } @else {
          <i class="bi bi-x-lg"></i>
          <span>Cancelar</span>
        }
      </button>
    </div>
  </div>

  <!-- Profile Cards Grid -->
  <div class="profile-grid">
    <!-- Información Personal -->
    <div class="info-card">
      <div class="card-header-custom">
        <i class="bi bi-person-badge"></i>
        <h3>Información Personal</h3>
      </div>
      <div class="card-content">
        @if (isLoading) {
          <div class="loading-skeleton" style="width: 100%; height: 20px; margin-bottom: 16px;"></div>
          <div class="loading-skeleton" style="width: 100%; height: 20px; margin-bottom: 16px;"></div>
          <div class="loading-skeleton" style="width: 100%; height: 20px;"></div>
        } @else {
          <div class="info-row">
            <div class="info-icon blue">
              <i class="bi bi-person"></i>
            </div>
            <div class="info-details">
              <span class="info-label">Nombre Completo</span>
              <span class="info-value">{{ profileData?.nombre }} {{ profileData?.apellido }}</span>
            </div>
          </div>
          <div class="info-row">
            <div class="info-icon purple">
              <i class="bi bi-hash"></i>
            </div>
            <div class="info-details">
              <span class="info-label">Código Estudiantil</span>
              <span class="info-value">{{ profileData?.codigo }}</span>
            </div>
          </div>
          
        }
      </div>
    </div>

    <!-- Información de Contacto -->
    <div class="info-card">
      <div class="card-header-custom">
        <i class="bi bi-envelope-at"></i>
        <h3>Contacto</h3>
      </div>
      <div class="card-content">
        @if (isLoading) {
          <div class="loading-skeleton" style="width: 100%; height: 20px; margin-bottom: 16px;"></div>
          <div class="loading-skeleton" style="width: 100%; height: 20px;"></div>
        } @else {
          <div class="info-row">
            <div class="info-icon green">
              <i class="bi bi-envelope"></i>
            </div>
            <div class="info-details">
              <span class="info-label">Correo Electrónico</span>
              <span class="info-value">{{ profileData?.correo }}</span>
            </div>
          </div>
          <div class="info-row">
            <div class="info-icon teal">
              <i class="bi bi-telephone"></i>
            </div>
            <div class="info-details">
              <span class="info-label">Teléfono</span>
              <span class="info-value">{{ profileData?.telefono || 'No registrado' }}</span>
            </div>
          </div>
        }
      </div>
    </div>

    <!-- Información Académica -->
    <div class="info-card">
      <div class="card-header-custom">
        <i class="bi bi-mortarboard"></i>
        <h3>Información Académica</h3>
      </div>
      <div class="card-content">
        @if (isLoading) {
          <div class="loading-skeleton" style="width: 100%; height: 20px; margin-bottom: 16px;"></div>
          <div class="loading-skeleton" style="width: 100%; height: 20px;"></div>
        } @else {
          <div class="info-row">
            <div class="info-icon indigo">
              <i class="bi bi-book"></i>
            </div>
            <div class="info-details">
              <span class="info-label">Carrera</span>
              <span class="info-value">{{ getCarreraName(profileData?.id_carrera) }}</span>
            </div>
          </div>
        }
      </div>
    </div>
  </div>

  <!-- Edit Form Modal -->
  @if (isEditing) {
    <div class="edit-modal">
      <div class="modal-backdrop" (click)="cancelEdit()"></div>
      <div class="modal-content" (click)="$event.stopPropagation()">
        <div class="modal-header">
          <div class="modal-header-info">
            <i class="bi bi-pencil-square"></i>
            <h2>Editar Información de Contacto</h2>
          </div>
          <button class="modal-close" (click)="cancelEdit()">
            <i class="bi bi-x-lg"></i>
          </button>
        </div>
        
        <form (ngSubmit)="onSubmit()" class="modal-form">
          <div class="form-group">
            <label for="correo">
              <i class="bi bi-envelope"></i>
              Correo Electrónico
              <span class="required">*</span>
            </label>
            <input
              type="email"
              id="correo"
              class="form-input"
              [(ngModel)]="editData.correo"
              name="correo"
              placeholder="correo@ejemplo.com"
              required
            />
          </div>

          <div class="form-group">
            <label for="telefono">
              <i class="bi bi-telephone"></i>
              Teléfono
            </label>
            <input
              type="tel"
              id="telefono"
              class="form-input"
              [(ngModel)]="editData.telefono"
              name="telefono"
              placeholder="+57 123 456 7890"
            />
          </div>

          @if (errorMessage) {
            <div class="error-alert">
              <i class="bi bi-exclamation-triangle"></i>
              <span>{{ errorMessage }}</span>
            </div>
          }

          @if (successMessage) {
            <div class="success-alert">
              <i class="bi bi-check-circle-fill"></i>
              <span>{{ successMessage }}</span>
            </div>
          }

          <div class="form-actions">
            <button type="button" class="btn-cancel" (click)="cancelEdit()">
              <i class="bi bi-x-circle"></i>
              Cancelar
            </button>
            <button type="submit" class="btn-save" [disabled]="isSubmitting">
              @if (isSubmitting) {
                <span class="spinner"></span>
                Guardando...
              } @else {
                <i class="bi bi-check-circle"></i>
                Guardar Cambios
              }
            </button>
          </div>
        </form>
      </div>
    </div>
  }
</div>
